<ng-template #loadingTemplate>
  <tim-loading></tim-loading>
</ng-template>
<ng-container *ngIf="!loading; else loadingTemplate">

  <mat-card *ngFor="let volume of volumes"
            fxLayout="row"
            fxLayoutAlign="start center"
            fxLayoutGap="8px">
    <mat-icon class="tim-text-primary tim-icon-48">storage</mat-icon>
    <div fxFlex="grow">
      <h2 style="margin-bottom: 0">
        {{volume.Name}}
        <br>
      </h2>
      <ng-container *ngIf="containers.get(volume.Name) as containers">
        <ng-container *ngIf="containers.length; else danglingTemplate">
          Used by:
          <span *ngFor="let container of containers">
            {{container.Names[0]}}
          </span>
        </ng-container>
        <ng-template #danglingTemplate>
          <b>Dangling</b>
        </ng-template>
      </ng-container>
    </div>
    <div>
      <span title="Created At"
            class="text-nowrap">
        <mat-icon>calendar_today</mat-icon>
        <small>
          {{volume.CreatedAt | date}}
        </small>
      </span>
    </div>
    <div>
      <button type="button"
              (click)="openVolumeMenu(volume)"
              mat-raised-button
              color="accent">
        <mat-icon>menu</mat-icon>
      </button>
    </div>
  </mat-card>
</ng-container>