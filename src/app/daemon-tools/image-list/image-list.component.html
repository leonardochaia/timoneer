<ng-template #loadingTemplate>
  <tim-loading></tim-loading>
</ng-template>
<ng-container *ngIf="images; else loadingTemplate">

  <form [formGroup]="filterForm"
        style="padding:16px"
        fxLayout="row"
        fxLayoutGap="8px"
        fxLayoutAlign="start center">

    <div fxFlex="grow">
      <mat-form-field style="width: 99%">
        <input type="search"
               placeholder="Type to search.."
               [formControl]="searchTermControl"
               matInput>
      </mat-form-field>
    </div>

    <div fxFlex>
      <mat-checkbox [formControl]="displayDanlingImagesControl">
        Show Dangling Images
        <b>
          ({{danglingAmount}})
        </b>
      </mat-checkbox>
    </div>
  </form>

  <mat-card *ngFor="let image of images"
            fxLayout="row"
            fxLayoutAlign="start center"
            fxLayoutGap="8px">
    <mat-icon class="tim-text-primary tim-icon-48">iso</mat-icon>
    <div fxFlex="grow">
      <h2 style="margin-bottom: 0">
        <span *ngFor="let tag of image.RepoTags">
          {{tag}}
        </span>
        <br>
        <code>
          {{image.Id | slice:7:19}}
        </code>
      </h2>
      <tim-loading *ngIf="loadingMap.get(image.Id)"></tim-loading>
    </div>

    <div class="text-nowrap">
      <b>{{image.Size | bytesToHuman}}</b>
    </div>

    <ng-container *ngIf="!loadingMap.get(image.Id)">
      <button type="button"
              matTooltip="Create Container"
              (click)="createContainer(image)"
              mat-raised-button
              color="accent">
        <mat-icon>add_to_queue</mat-icon>
      </button>

      <button type="button"
              matTooltip="Delete Image"
              (click)="deleteImage(image)"
              mat-raised-button>
        <mat-icon>delete</mat-icon>
      </button>
    </ng-container>
  </mat-card>

</ng-container>